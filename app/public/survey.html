<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FrendFndr Survey</title>
    <!-- Jquery CDN -->
    <script src="https://code.jquery.com/jquery-3.2.1.min.js" integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4=" crossorigin="anonymous"></script>
    <!-- fonts -->
    <link href="https://fonts.googleapis.com/css?family=Zilla+Slab:300,400,500" rel="stylesheet">
    <!-- CSS -->
    <link rel="stylesheet" type="text/css" href="css/reset.css">
    <link rel="stylesheet" type="text/css" href="css/style.css">
    <link rel="stylesheet" type="text/css" href="css/survey-style.css">
</head>

<body>
    <main class="container">
        <button class="backArrow back-btn">&#10140;</button>
        <div class=head>
            <img class="back-btn" src="images/FF-logo2.svg" alt="Friend finder logo" style="width: 100px">
        </div>
        <form class="inputWrapper">
            <section class="rowWrapper">
                <div class="form-row col-6">
                    <input id="firstName" class="validate" type="text" name="firstName" class="form" placeholder="First Name" required>
                    <label for="firstNmae">first name</label>
                </div>
                <div class="form-row col-6">
                    <input id="lastName" class="validate" type="text" name="lastName" class="form" placeholder="Last Name" required>
                    <label for="lastName">last name</label>
                </div>
            </section>
            <section class="rowWrapper">
                <div class="form-row col-12">
                    <input id="email-input" class="validate" type="email" name="email" placeholder="Enter valid email address" required></input>
                    <label for="email">email address</label>
                </div>
            </section>
            <section class="rowWrapper">
                <div class="form-row col-12">
                    <input id="photo" class="validate" type="text" name="photoLink" placeholder="Enter link to your photo" required>
                    <label for="photo">link to photo</label>
                </div>
            </section>
        </form>
        <form>
            <div class="surveyWrapper">
                <div class="quest-block col-6">
                    <h3 class="question"><span class="NumDropCap">1. </span>Your mind is always buzzing with unexplored ideas and plans.</h3>
                    <select id="quest-1" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
                <div class="quest-block col-6">
                    <h3 class="question"><span class="NumDropCap">2. </span>Generally speaking, you rely more on your experience than your imagination.</h3>
                    <select id="quest-2" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
            </div>
            <div class="surveyWrapper">
                <div class="quest-block col-6">
                    <h3 class="question"><span class="NumDropCap">3. </span>You find it easy to stay relaxed and focused even when there is some pressure.</h3>
                    <select id="quest-3" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
                <div class="quest-block col-6">
                    <h3 class="question"><span class="NumDropCap">4. </span>You rarely get carried away by fantasies and ideas.</h3>
                    <select id="quest-4" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
            </div>
            <div class="surveyWrapper">
                <div class="quest-block col-6">
                    <h3><span>5. </span>You rarely get carried away by fantasies and ideas.</h3>
                    <select id="quest-5" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
                <div class="quest-block col-6">
                    <h3><span>6. </span>It is often difficult for you to relate to other people’s feelings.</h3>
                    <select id="quest-6" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
            </div>
            <div class="surveyWrapper">
                <div class="quest-block col-6">
                    <h3><span>7. </span>In a discussion, truth should be more important than people’s sensitivities.</h3>
                    <select id="quest-7" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
                <div class="quest-block col-6">
                    <h3><span>8. </span>You rarely get carried away by fantasies and ideas.</h3>
                    <select id="quest-8" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
            </div>
            <div class="surveyWrapper">
                <div class="quest-block col-6">
                    <h3><span>9. </span>You think that everyone’s views should be respected regardless of whether they are supported by facts or not.</h3>
                    <select id="quest-9" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
                <div class="quest-block col-6">
                    <h3><span>10. </span>You feel more energetic after spending time with a group of people.</h3>
                    <select id="quest-10" class="qValid" required>
                        <option value="" disabled selected hidden>Select on a scale of 1 to 5</option>
                        <option value="5">😁 | Strongly agree</option>
                        <option value="4">😌 | Agree</option>
                        <option value="3">😐 | Neutral</option>
                        <option value="2">😕 | Slightly disagree</option>
                        <option value="1">😖 | Strongly disagree</option>
                    </select>
                </div>
            </div>
        </form>
        <div id="btn-wrapper">
            <button class="submit-Btn" role="button">
                <span>submit survey</span>
                <div class="success">&#10004;</div>
                <!-- <div class="btn-rollover">send it!</div> -->
            </button>
        </div>
        <section class="foot">
            <a href="/API/list">API Friend List</a> |
            <a href="https://github.com/rspica/FriendFinder/blob/master/README.md" target="_blank"> GitHub Repo</a>
        </section>
    </main>
    <script>
    $(document).ready(function() {});

    // form validation for type inputs and select option inputs
    function formValidate() {
        var isValid = true
        $('.validate').each(function() {
            if ($(this).val() === '' || $(this).val() === ' ') {
                alert('Oops you left the ' + this.name + ' field blank');
                isValid = false;
            }
        });

        $('.qValid').each(function() {
            if ($(this).val() === '') {
                isValid = false;
                alert('Hey you left question ' + this.value + ' field blank');
            }
        });
        return isValid
    };

    // function to collect input values on form and survey
    function inputValue(value) {
        return $(value).val().trim();
    }

    function surveyReset(value) {
        $(value).val('Select on a scale of 1 to 5');
    }

    //===============  Event handlers  ==================
    //===================================================
    // Event to get values from survey and form field
    $(document).on('click', '.submit-Btn', function(e) {
        e.preventDefault();
        e.stopPropagation();

        const questions = [];
        const quest = ['#quest-1', '#quest-2', '#quest-3', '#quest-4', '#quest-5', '#quest-6', '#quest-7',
            '#quest-8', '#quest-9', '#quest-10'
        ];

        if (formValidate() === true) {
            quest.forEach(function(elem, index) {
                    const response = inputValue(elem);
                    questions.push(response);
                    surveyReset(elem);
                });

                const success = $('.success'); // ui action on submit button
                success.addClass('iconCHK');
                setTimeout(function() {
                    success.removeClass('iconCHK')
                }, 2500);
            

        var newFriend = {
            firstName: inputValue($('#firstName')),
            lastName: inputValue($('#lastName')),
            email: inputValue($('#email-input')),
            photo: inputValue($('#photo')),
            scores: questions
        };

        console.log("new submission: ", newFriend);

        $.post("data/friends", newFriend, function(data) {
            console.log(data)
        });
    } else {
        alert('Opps, go back and check your work; check question');
    }

    //resetEverything();
    });

    function resetEverything() {
        $('#firstName').val('');
        $('#lastName').val('');
        $('#email-input').val('');
        $('#photo').val('');
        // $('#quest-1').val('');
        // $('#quest-2').val('');
        // $('#quest-3').val('');
        // $('#quest-4').val('');
        // $('#quest-5').val('');
        // $('#quest-6').val('');
        // $('#quest-7').val('');
        // $('#quest-8').val('');
        // $('#quest-9').val('');
        // $('#quest-10').val('');
    }
    </script>
</body>

</html>
